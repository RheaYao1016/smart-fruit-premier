import{B as y,f as r,C as i,S as a,i as h,A as b}from"./index-VVcMOklA.js";function s(){return{fruitCount:1,fruits:[{id:1,pitting:!1,peeling:!1,cutting:!0}],mode:"",bladeVideo:"",settings:{texture:"微渣口感",temperature:"常温",sweetnessType:"自定义",sweetnessValue:35,cannedTemperature:"常温",cannedSweetness:20}}}const C=y("production",()=>{const t=r(s()),n=r(i.get(a.productionHistory,[])),o=h(()=>t.value.mode==="juice"?"果汁":t.value.mode==="canned"?"罐头":t.value.mode==="cut"?"果切":"-");function f(){i.set(a.productionHistory,n.value)}function l(){t.value=s()}function d(e){const u=Math.min(6,Math.max(1,Number(e||1)));t.value.fruitCount=u,t.value.fruits=Array.from({length:u},(w,S)=>({id:S+1,pitting:!1,peeling:!1,cutting:!0}))}function c(e,u){t.value.fruits[e]&&(t.value.fruits[e]={...t.value.fruits[e],...u,cutting:!0})}function g(e){t.value.mode=e,t.value.bladeVideo=b.bladeVideos[e]||""}function p(e){t.value.settings={...t.value.settings,...e}}function v(e){n.value.unshift({id:`h_${Date.now()}_${Math.random().toString(16).slice(2,6)}`,...e,createdAt:new Date().toISOString()}),f()}function m(e){return n.value.filter(u=>u.userId===e)}return{draft:t,history:n,modeLabel:o,resetDraft:l,setFruitCount:d,updateFruit:c,setMode:g,updateSettings:p,addHistoryRecord:v,getHistoryByUser:m}});export{C as u};
