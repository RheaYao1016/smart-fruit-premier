import{u as _,o as c,c as p,a as t,w as k,b as x,v as m,t as r,d as C,e as b,F as S,r as V,f as u,g as B,h as D,i as $}from"./index-CooPFdbs.js";const F={class:"min-h-screen bg-app-bg px-4 py-8"},L={class:"mx-auto max-w-md rounded-3xl border border-amber-100 bg-white p-6 shadow-xl shadow-amber-100/40"},M={key:0,class:"rounded-xl bg-red-50 px-3 py-2 text-xs text-red-500"},N=["disabled"],R={class:"mt-4 flex items-center justify-between text-sm"},U={class:"mt-6 rounded-2xl bg-stone-50 p-3"},j={class:"mt-2 grid grid-cols-1 gap-2"},q=["onClick"],z={__name:"LoginView",setup(A){const v=D(),i=B(),f=_(),n=u(""),a=u(""),l=u(""),d=u(!1),w=$(()=>String(v.query.redirect||"/")),g=[{role:"admin",account:"admin",password:"admin123"},{role:"maintainer",account:"maintainer",password:"maintain123"},{role:"user",account:"user",password:"user123"}];async function y(){l.value="",d.value=!0;const o=f.login(n.value,a.value);if(d.value=!1,!o.success){l.value=o.message;return}i.replace(w.value)}function h(o){n.value=o.account,a.value=o.password}return(o,e)=>(c(),p("div",F,[t("div",L,[e[5]||(e[5]=t("h1",{class:"text-center text-2xl font-bold text-stone-800"},"智果大师",-1)),e[6]||(e[6]=t("p",{class:"mt-1 text-center text-sm text-stone-500"},"登录后可使用制作向导、社区和个人中心",-1)),t("form",{class:"mt-6 space-y-4",onSubmit:k(y,["prevent"])},[x(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>n.value=s),type:"text",placeholder:"账号",class:"w-full rounded-xl border border-stone-200 px-4 py-3"},null,512),[[m,n.value]]),x(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.value=s),type:"password",placeholder:"密码",class:"w-full rounded-xl border border-stone-200 px-4 py-3"},null,512),[[m,a.value]]),l.value?(c(),p("p",M,r(l.value),1)):C("",!0),t("button",{type:"submit",class:"w-full rounded-xl bg-amber-500 px-4 py-3 font-semibold text-white disabled:opacity-60",disabled:d.value},r(d.value?"登录中...":"登录"),9,N)],32),t("div",R,[t("button",{class:"text-stone-500",onClick:e[2]||(e[2]=s=>b(i).push("/forgot-password"))},"找回密码"),t("button",{class:"font-medium text-amber-600",onClick:e[3]||(e[3]=s=>b(i).push("/register"))},"去注册")]),t("div",U,[e[4]||(e[4]=t("p",{class:"text-xs text-stone-500"},"演示账号",-1)),t("div",j,[(c(),p(S,null,V(g,s=>t("button",{key:s.role,class:"rounded-xl border border-stone-200 bg-white px-3 py-2 text-left text-xs",onClick:E=>h(s)},r(s.role)+": "+r(s.account)+" / "+r(s.password),9,q)),64))])])])]))}};export{z as default};
