import{u as _,o as d,c as n,a as e,t as o,d as m,w as k,b as a,v as u,j as M,i as v,f as c,g as G,h as U}from"./index-CRnHf-Cy.js";import{u as N}from"./nutrition-D1E87K7L.js";import{_ as C}from"./ImageField-bbXNBN96.js";import"./ImageEditor-BPxq-xw8.js";const S={key:0,class:"space-y-4"},h={class:"card overflow-hidden"},B=["src"],D={class:"space-y-2 p-4"},I={class:"text-xl font-semibold"},$={class:"text-sm text-stone-600"},j={class:"card p-4"},A={class:"mt-2 space-y-1 text-sm text-stone-600"},E={class:"card p-4"},R={class:"mt-2 text-sm leading-6 text-stone-600"},z={key:0,class:"card p-4"},T={class:"mx-auto max-h-full max-w-xl space-y-3 overflow-y-auto rounded-3xl bg-white p-4"},q={class:"grid grid-cols-2 gap-2"},F={class:"grid grid-cols-2 gap-2"},H={key:1,class:"card p-4 text-sm text-stone-500"},W={__name:"NutritionDetailView",setup(J){const x=U(),b=G(),p=N(),f=_(),s=v(()=>p.getById(String(x.params.id))),y=v(()=>f.role==="admin"),i=c(!1),l=c({title:"",summary:"",cover:"",detail:"",fruits:"",waterMl:0,sugarG:0,temperature:""});function g(){s.value&&(l.value={title:s.value.title,summary:s.value.summary,cover:s.value.cover,detail:s.value.detail,fruits:s.value.recipe.fruits,waterMl:s.value.recipe.waterMl,sugarG:s.value.recipe.sugarG,temperature:s.value.recipe.temperature},i.value=!0)}function w(){p.updateItem(s.value.id,{title:l.value.title,summary:l.value.summary,cover:l.value.cover,detail:l.value.detail,recipe:{fruits:l.value.fruits,waterMl:Number(l.value.waterMl),sugarG:Number(l.value.sugarG),temperature:l.value.temperature}}),i.value=!1}function V(){s.value&&(p.deleteItem(s.value.id),b.push("/nutrition"))}return(K,t)=>s.value?(d(),n("div",S,[e("section",h,[e("img",{src:s.value.cover,class:"h-52 w-full object-cover"},null,8,B),e("div",D,[e("h1",I,o(s.value.title),1),e("p",$,o(s.value.summary),1)])]),e("section",j,[t[10]||(t[10]=e("h2",{class:"font-semibold"},"配比参数",-1)),e("ul",A,[e("li",null,"水果数量："+o(s.value.recipe.fruits),1),e("li",null,"注水量："+o(s.value.recipe.waterMl)+" ml",1),e("li",null,"糖量："+o(s.value.recipe.sugarG)+" g",1),e("li",null,"饮用温度："+o(s.value.recipe.temperature),1)])]),e("section",E,[t[11]||(t[11]=e("h2",{class:"font-semibold"},"详情",-1)),e("p",R,o(s.value.detail),1)]),y.value?(d(),n("section",z,[t[12]||(t[12]=e("h3",{class:"font-semibold"},"管理员操作",-1)),e("div",{class:"mt-3 grid grid-cols-2 gap-2"},[e("button",{class:"rounded-xl border border-amber-400 px-3 py-2 text-sm text-amber-600",onClick:g},"编辑"),e("button",{class:"rounded-xl border border-red-300 px-3 py-2 text-sm text-red-500",onClick:V},"删除")])])):m("",!0),i.value?(d(),n("div",{key:1,class:"fixed inset-0 z-[65] bg-black/50 p-3",onClick:t[9]||(t[9]=k(r=>i.value=!1,["self"]))},[e("div",T,[t[13]||(t[13]=e("h3",{class:"text-lg font-semibold"},"编辑科普内容",-1)),a(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>l.value.title=r),type:"text",class:"w-full rounded-xl border border-stone-200 px-3 py-2"},null,512),[[u,l.value.title]]),a(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>l.value.summary=r),type:"text",class:"w-full rounded-xl border border-stone-200 px-3 py-2"},null,512),[[u,l.value.summary]]),M(C,{modelValue:l.value.cover,"onUpdate:modelValue":t[2]||(t[2]=r=>l.value.cover=r),label:"封面图","aspect-hint":"建议 16:9"},null,8,["modelValue"]),a(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=r=>l.value.detail=r),rows:"4",class:"w-full rounded-xl border border-stone-200 px-3 py-2"},null,512),[[u,l.value.detail]]),e("div",q,[a(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>l.value.fruits=r),type:"text",class:"rounded-xl border border-stone-200 px-3 py-2"},null,512),[[u,l.value.fruits]]),a(e("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>l.value.temperature=r),type:"text",class:"rounded-xl border border-stone-200 px-3 py-2"},null,512),[[u,l.value.temperature]]),a(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>l.value.waterMl=r),type:"number",class:"rounded-xl border border-stone-200 px-3 py-2"},null,512),[[u,l.value.waterMl]]),a(e("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>l.value.sugarG=r),type:"number",class:"rounded-xl border border-stone-200 px-3 py-2"},null,512),[[u,l.value.sugarG]])]),e("div",F,[e("button",{class:"rounded-xl border border-stone-300 px-4 py-2.5",onClick:t[8]||(t[8]=r=>i.value=!1)},"取消"),e("button",{class:"rounded-xl bg-amber-500 px-4 py-2.5 font-semibold text-white",onClick:w},"保存")])])])):m("",!0)])):(d(),n("div",H,"内容不存在"))}};export{W as default};
