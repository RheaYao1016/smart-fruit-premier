import{_ as B,u as A,n as H,p as I,o as d,c as l,a as t,e as i,A as U,F as m,r as b,q as V,t as o,s as w,f as p,g as q,i as M}from"./index-D_8ZP-ZB.js";import{u as D}from"./community-55jVceJj.js";import{u as N}from"./production-BVitJLfP.js";import{f as P}from"./datetime-DA9gX19a.js";const z={class:"space-y-4"},E={class:"overflow-hidden rounded-3xl border border-amber-100 bg-white shadow"},F=["src"],R={class:"space-y-2 px-4 py-4"},T={class:"grid grid-cols-3 gap-2"},J={class:"grid grid-cols-1 gap-3"},L=["onClick"],Q={class:"text-lg font-semibold text-stone-800"},W={class:"mt-1 text-sm text-stone-500"},G={class:"card overflow-hidden"},K={class:"dashboard-bg relative p-4"},O={class:"grid grid-cols-2 gap-2"},X={class:"rounded-xl bg-white/80 p-3 shadow-sm"},Y={class:"text-xl font-bold text-emerald-600"},Z={class:"mt-1 h-1.5 overflow-hidden rounded-full bg-stone-200"},tt={class:"rounded-xl bg-white/80 p-3 shadow-sm"},et={class:"text-xl font-bold text-cyan-600"},st={class:"mt-3 rounded-xl bg-white/80 p-3 shadow-sm"},ot={class:"h-2 overflow-hidden rounded-full bg-stone-200"},nt={class:"mt-2 flex items-center justify-between text-[10px] text-stone-600"},dt={class:"mt-3 rounded-xl bg-white/80 p-3 shadow-sm"},lt={class:"flex h-16 items-end gap-1"},at={class:"card p-4"},it={class:"mb-3 flex items-center justify-between"},rt={key:0,class:"space-y-3"},ut=["onClick"],ct={class:"line-clamp-1 text-sm font-medium text-stone-800"},xt={class:"mt-1 line-clamp-1 text-xs text-stone-500"},mt={class:"mt-1 text-xs text-stone-400"},bt={key:1,class:"text-sm text-stone-400"},pt={class:"card p-4"},ht={class:"mb-3 flex items-center justify-between"},vt={key:0,class:"space-y-2"},ft={class:"text-sm font-medium"},_t={class:"text-xs text-stone-500"},gt={key:1,class:"text-sm text-stone-400"},yt={__name:"HomeView",setup(wt){const r=q(),h=A(),S=D(),v=N(),j=[{title:"å¼€å§‹åˆ¶ä½œ",desc:"è¿›å…¥ 5 æ­¥åˆ¶ä½œå‘å¯¼",path:"/production"},{title:"è¥å…»ç§‘æ™®",desc:"æŸ¥çœ‹æ°´æœé…æ¯”ä¸æ¸©åº¦å»ºè®®",path:"/nutrition"},{title:"æœæ±ç¤¾åŒº",desc:"å‘å¸ƒå›¾æ–‡å¹¶äº’åŠ¨",path:"/community"}],k=M(()=>{var n;return S.queryPosts({userId:(n=h.currentUser)==null?void 0:n.id,role:h.role,page:1,pageSize:3,sort:"hot"}).items}),C=M(()=>{var n;return v.getHistoryByUser((n=h.currentUser)==null?void 0:n.id).slice(0,2)}),f=p([58,76,64,82,69,91,73]),a=p({juice:62,canned:23,cut:15}),x=p(88),_=p(39);let g=null;function u(n,e,s){return Math.max(e,Math.min(s,n))}function $(){f.value=f.value.map(c=>u(c+Math.round((Math.random()-.5)*14),35,96));const n=u(a.value.juice+Math.round((Math.random()-.5)*10),40,75),e=u(a.value.canned+Math.round((Math.random()-.5)*8),10,40),s=Math.max(5,100-n-e);a.value={juice:n,canned:e,cut:s},x.value=u(x.value+Math.round((Math.random()-.5)*4),82,98),_.value=u(_.value+Math.round((Math.random()-.5)*3),28,48)}function y(n){v.resetDraft(),v.setMode(n),r.push("/production")}return H(()=>{g=window.setInterval($,2200)}),I(()=>{g&&window.clearInterval(g)}),(n,e)=>(d(),l("div",z,[t("section",E,[t("img",{src:i(U).homeBanner,class:"h-44 w-full object-cover",alt:"banner"},null,8,F),t("div",R,[e[5]||(e[5]=t("h2",{class:"text-xl font-bold text-stone-800"},"æ™ºèƒ½æ°´æœå¤„ç†ä¸“å®¶",-1)),e[6]||(e[6]=t("p",{class:"text-sm text-stone-600"},"ä¸€é”®åˆ¶ä½œé²œæœæ±ã€æ°´æœç½å¤´å’Œæœåˆ‡ï¼Œæ‰‹æœº/PWA ç›´æ¥å¯ç”¨ã€‚",-1)),t("div",T,[t("button",{class:"rounded-xl bg-amber-500 px-3 py-2 text-xs font-semibold text-white",onClick:e[0]||(e[0]=s=>y("juice"))},"æœæ±"),t("button",{class:"rounded-xl bg-emerald-500 px-3 py-2 text-xs font-semibold text-white",onClick:e[1]||(e[1]=s=>y("canned"))},"ç½å¤´"),t("button",{class:"rounded-xl bg-cyan-500 px-3 py-2 text-xs font-semibold text-white",onClick:e[2]||(e[2]=s=>y("cut"))},"æœåˆ‡")])])]),t("section",J,[(d(),l(m,null,b(j,s=>t("button",{key:s.path,class:"card p-4 text-left active:scale-[0.99]",onClick:c=>i(r).push(s.path)},[t("p",Q,o(s.title),1),t("p",W,o(s.desc),1)],8,L)),64))]),t("section",G,[t("div",K,[e[12]||(e[12]=V('<div class="pointer-events-none absolute right-4 top-4 h-8 w-8 rounded-full bg-white/40 pulse-dot" data-v-bbbd98da></div><div class="pointer-events-none absolute left-6 top-6 h-3 w-3 rounded-full bg-amber-300/80 float-dot" data-v-bbbd98da></div><div class="pointer-events-none absolute bottom-5 right-10 h-2 w-2 rounded-full bg-emerald-300/80 float-dot delay-1" data-v-bbbd98da></div><div class="mb-3 flex items-center justify-between" data-v-bbbd98da><h3 class="text-base font-semibold text-stone-800" data-v-bbbd98da>å®æ—¶è¿è¡Œçœ‹æ¿</h3><span class="rounded-full bg-white/60 px-2 py-1 text-[10px] text-stone-600" data-v-bbbd98da>è‡ªåŠ¨æ›´æ–°</span></div>',4)),t("div",O,[t("div",X,[e[7]||(e[7]=t("p",{class:"text-[11px] text-stone-500"},"è®¾å¤‡ç¨³å®šç‡",-1)),t("p",Y,o(x.value)+"%",1),t("div",Z,[t("div",{class:"h-full bg-emerald-500 transition-all duration-700",style:w({width:`${x.value}%`})},null,4)])]),t("div",tt,[e[8]||(e[8]=t("p",{class:"text-[11px] text-stone-500"},"å•æ¯å‡è€—æ—¶",-1)),t("p",et,o(_.value)+"s",1),e[9]||(e[9]=t("p",{class:"mt-1 text-[10px] text-stone-400"},"ç›®æ ‡åŒºé—´ 30-45s",-1))])]),t("div",st,[e[10]||(e[10]=t("p",{class:"mb-2 text-xs text-stone-600"},"ä»Šæ—¥æ¨¡å¼å æ¯”",-1)),t("div",ot,[t("div",{class:"h-full bg-amber-400 transition-all duration-700",style:w({width:`${a.value.juice}%`})},null,4)]),t("div",nt,[t("span",null,"æœæ± "+o(a.value.juice)+"%",1),t("span",null,"ç½å¤´ "+o(a.value.canned)+"%",1),t("span",null,"æœåˆ‡ "+o(a.value.cut)+"%",1)])]),t("div",dt,[e[11]||(e[11]=t("p",{class:"mb-2 text-xs text-stone-600"},"7æ®µäº§èƒ½æ³¢åŠ¨",-1)),t("div",lt,[(d(!0),l(m,null,b(f.value,(s,c)=>(d(),l("div",{key:c,class:"flex-1 rounded-t bg-gradient-to-t from-amber-500 to-emerald-400 transition-all duration-700",style:w({height:`${s}%`})},null,4))),128))])])])]),t("section",at,[t("div",it,[e[13]||(e[13]=t("h3",{class:"text-base font-semibold"},"ç¤¾åŒºçƒ­å¸–",-1)),t("button",{class:"text-xs text-amber-600",onClick:e[3]||(e[3]=s=>i(r).push("/community"))},"æŸ¥çœ‹å…¨éƒ¨")]),k.value.length?(d(),l("div",rt,[(d(!0),l(m,null,b(k.value,s=>(d(),l("button",{key:s.id,class:"w-full rounded-xl border border-stone-200 p-3 text-left",onClick:c=>i(r).push(`/community/${s.id}`)},[t("p",ct,o(s.title),1),t("p",xt,o(s.content),1),t("p",mt,"ğŸ‘ "+o(s.likeCount)+" Â· ğŸ’¬ "+o(s.commentCount),1)],8,ut))),128))])):(d(),l("p",bt,"æš‚æ— å†…å®¹"))]),t("section",pt,[t("div",ht,[e[14]||(e[14]=t("h3",{class:"text-base font-semibold"},"æˆ‘çš„æœ€è¿‘åˆ¶ä½œ",-1)),t("button",{class:"text-xs text-amber-600",onClick:e[4]||(e[4]=s=>i(r).push("/my"))},"å»æˆ‘çš„")]),C.value.length?(d(),l("div",vt,[(d(!0),l(m,null,b(C.value,s=>(d(),l("div",{key:s.id,class:"rounded-xl border border-stone-200 p-3"},[t("p",ft,o(s.mode==="juice"?"æœæ±":s.mode==="canned"?"ç½å¤´":"æœåˆ‡")+" Â· "+o(s.fruitCount)+" ä¸ªæ°´æœ",1),t("p",_t,o(i(P)(s.createdAt)),1)]))),128))])):(d(),l("p",gt,"è¿˜æ²¡æœ‰åˆ¶ä½œè®°å½•ï¼Œå»å¼€å§‹åˆ¶ä½œå§ã€‚"))])]))}},jt=B(yt,[["__scopeId","data-v-bbbd98da"]]);export{jt as default};
