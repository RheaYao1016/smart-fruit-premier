import{i as V,A as le,c as n,a as e,b as d,l as u,m as L,y as q,t as o,F as f,n as b,q as x,s as m,v as j,B as re,g as D,j as r,x as c,U as R,e as ae,f as l,h as ne,C as ie}from"./index-DxTQJ_MY.js";import{S as de,_ as ue,H as P}from"./ImageCropper-BdOhV9FC.js";import{X as ce}from"./x-DZX_Ph0D.js";import{A as pe}from"./arrow-left-og81Y4hK.js";import"./check-DKu3InlJ.js";/**
 * @license lucide-vue-next v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=V("CameraIcon",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-vue-next v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=V("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=V("LogOutIcon",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-vue-next v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=V("SettingsIcon",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),fe={class:"min-h-screen bg-cream pb-24 md:pb-8"},be={key:0},xe={class:"relative h-56"},me=["src"],he={class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},ye={class:"bg-black/50 text-white px-4 py-2 rounded-full backdrop-blur-md flex items-center gap-2 text-sm font-bold"},ke={class:"w-24 h-24 rounded-full border-4 border-cream bg-white p-1 shadow-xl relative overflow-hidden"},we=["src"],_e={class:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},Ce={class:"text-center mt-14 mb-8 relative px-4"},je={class:"text-2xl font-heading font-bold text-dark-text"},Pe={class:"text-gray-400 text-sm mt-1"},Ve={class:"flex items-center justify-center gap-3 mt-3 text-xs text-gray-500"},Ue={class:"bg-gray-100 px-2 py-1 rounded-md"},Le={class:"bg-gray-100 px-2 py-1 rounded-md"},Ae={class:"bg-gray-100 px-2 py-1 rounded-md"},Ie={class:"flex justify-center gap-4 mb-8 px-6"},Se={class:"font-bold text-xl text-dark-text"},ze={class:"text-xs text-gray-400 mt-1"},Be={class:"px-6 space-y-4"},Ne={class:"bg-white rounded-3xl p-2 shadow-sm border border-gray-100"},He=["onClick"],Me={class:"flex items-center gap-4"},$e={class:"w-10 h-10 rounded-xl bg-fresh-green-50 text-fresh-green-600 flex items-center justify-center group-hover:bg-fresh-green-500 group-hover:text-white transition-colors"},Fe={class:"font-medium text-dark-text"},qe={class:"bg-white w-full md:max-w-md md:rounded-3xl rounded-t-[2rem] p-6 animate-in slide-in-from-bottom duration-300"},De={class:"flex items-center justify-between mb-6"},Re={class:"space-y-4"},Te={class:"grid grid-cols-2 gap-4"},Ee={key:3,class:"min-h-screen bg-cream"},Ge={class:"bg-white/80 backdrop-blur-md px-6 py-4 flex items-center gap-4 border-b border-gray-100 sticky top-0 z-10"},Oe={class:"text-xl font-bold font-heading text-dark-text"},Xe={class:"p-6 space-y-4"},Je=["src"],Ke={class:"font-bold text-dark-text"},Qe={class:"text-xs text-gray-500"},We=["src"],Ye={class:"font-bold text-dark-text"},Ze={class:"text-xs text-gray-500"},et=["src"],tt={class:"flex-1"},st={class:"text-sm text-dark-text mb-2 line-clamp-2"},ot={class:"flex items-center justify-between text-xs text-gray-400"},lt={class:"flex items-center gap-1"},ct={__name:"ProfileView",setup(rt){const G=ae(),i=le(),p=r("menu"),A=c(()=>i.userProfile.name),I=c(()=>i.userProfile.bio),O=c(()=>i.userProfile.avatar),X=c(()=>i.userProfile.header),S=c(()=>i.userProfile.gender),z=c(()=>i.userProfile.age),B=c(()=>i.userProfile.location),v=r(!1),h=r(""),y=r(""),k=r(""),w=r(""),_=r(""),C=r(!1),N=r(""),U=r("avatar"),H=r(1),J=r([{label:"制作次数",value:24,icon:E},{label:"获赞",value:128,icon:P},{label:"收藏",value:15,icon:R}]),K=[{id:"posts",label:"我的发布",icon:R,path:"/profile/posts"},{id:"favorites",label:"收藏配方",icon:P,path:"/profile/favorites"},{id:"history",label:"制作记录",icon:E,path:"/profile/history"},{id:"settings",label:"系统设置",icon:ge,path:"/settings"}],M=r(null),$=r(null),Q=a=>{if(a==="settings"){alert("系统设置功能开发中...");return}p.value=a},W=()=>{i.logout(),G.push("/login")},Y=()=>{h.value=A.value,y.value=I.value,k.value=S.value||"女",w.value=z.value||25,_.value=B.value||"上海",v.value=!0},Z=()=>{i.updateProfile({name:h.value,bio:y.value,gender:k.value,age:w.value,location:_.value}),v.value=!1},ee=()=>M.value.click(),te=()=>$.value.click(),F=(a,t)=>{const s=a.target.files[0];if(!s)return;const g=new FileReader;g.onload=oe=>{N.value=oe.target.result,U.value=t,H.value=t==="avatar"?1:16/9,C.value=!0,a.target.value=""},g.readAsDataURL(s)},se=a=>{U.value==="avatar"&&i.updateProfile({avatar:a}),U.value==="header"&&i.updateProfile({header:a}),C.value=!1};return(a,t)=>(l(),n("div",fe,[p.value==="menu"?(l(),n("div",be,[e("div",xe,[e("div",{class:"absolute inset-0 cursor-pointer group",onClick:te},[e("img",{src:X.value,class:"w-full h-full object-cover rounded-b-[3rem] brightness-90 group-hover:brightness-75 transition-all"},null,8,me),e("div",he,[e("span",ye,[d(u(T),{class:"w-4 h-4"}),t[11]||(t[11]=L(" 更换背景 ",-1))])])]),e("input",{type:"file",ref_key:"headerInput",ref:$,class:"hidden",accept:"image/*",onChange:t[0]||(t[0]=s=>F(s,"header"))},null,544),e("div",{class:"absolute -bottom-12 left-1/2 -translate-x-1/2 z-10 cursor-pointer group",onClick:q(ee,["stop"])},[e("div",ke,[e("img",{src:O.value,class:"w-full h-full rounded-full object-cover"},null,8,we),e("div",_e,[d(u(T),{class:"w-6 h-6 text-white"})])]),e("input",{type:"file",ref_key:"avatarInput",ref:M,class:"hidden",accept:"image/*",onChange:t[1]||(t[1]=s=>F(s,"avatar"))},null,544)])]),e("div",Ce,[e("h1",je,o(A.value),1),e("p",Pe,o(I.value),1),e("div",Ve,[e("span",Ue,o(S.value),1),e("span",Le,o(z.value)+"岁",1),e("span",Ae,o(B.value),1)]),e("button",{onClick:Y,class:"absolute top-0 right-4 md:right-8 text-gray-400 hover:text-fresh-green-600 p-2"},[d(u(de),{class:"w-5 h-5"})])]),e("div",Ie,[(l(!0),n(f,null,b(J.value,(s,g)=>(l(),n("div",{key:g,class:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 flex-1 text-center min-w-[100px]"},[e("h3",Se,o(s.value),1),e("p",ze,o(s.label),1)]))),128))]),e("div",Be,[e("div",Ne,[(l(),n(f,null,b(K,s=>e("button",{key:s.id,onClick:g=>Q(s.id),class:"w-full flex items-center justify-between p-4 hover:bg-gray-50 rounded-2xl transition-colors group"},[e("div",Me,[e("div",$e,[(l(),D(ne(s.icon),{class:"w-5 h-5"}))]),e("span",Fe,o(s.label),1)]),d(u(ie),{class:"w-5 h-5 text-gray-300"})],8,He)),64))]),e("button",{onClick:W,class:"w-full py-4 bg-white text-red-500 font-bold rounded-2xl shadow-sm border border-red-50 hover:bg-red-50 transition-colors flex items-center justify-center gap-2"},[d(u(ve),{class:"w-5 h-5"}),t[12]||(t[12]=L(" 退出登录 ",-1))])])])):x("",!0),v.value?(l(),n("div",{key:1,class:"fixed inset-0 z-50 flex items-end md:items-center justify-center bg-black/50 backdrop-blur-sm",onClick:t[8]||(t[8]=q(s=>v.value=!1,["self"]))},[e("div",qe,[e("div",De,[t[13]||(t[13]=e("h3",{class:"font-bold text-xl"},"编辑个人资料",-1)),e("button",{onClick:t[2]||(t[2]=s=>v.value=!1),class:"p-2 hover:bg-gray-100 rounded-full"},[d(u(ce),{class:"w-5 h-5"})])]),e("div",Re,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"昵称",-1)),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>h.value=s),type:"text",class:"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 outline-none focus:border-fresh-green-500 transition-colors"},null,512),[[j,h.value]])]),e("div",Te,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"性别",-1)),m(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>k.value=s),class:"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 outline-none focus:border-fresh-green-500 transition-colors"},[...t[15]||(t[15]=[e("option",null,"男",-1),e("option",null,"女",-1),e("option",null,"保密",-1)])],512),[[re,k.value]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"年龄",-1)),m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>w.value=s),type:"number",class:"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 outline-none focus:border-fresh-green-500 transition-colors"},null,512),[[j,w.value]])])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"城市",-1)),m(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>_.value=s),type:"text",class:"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 outline-none focus:border-fresh-green-500 transition-colors"},null,512),[[j,_.value]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"个性签名",-1)),m(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=s=>y.value=s),class:"w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 outline-none focus:border-fresh-green-500 transition-colors h-24 resize-none"},null,512),[[j,y.value]])]),e("button",{onClick:Z,class:"w-full btn-primary mt-4"}," 保存修改 ")])])])):x("",!0),C.value?(l(),D(ue,{key:2,"image-src":N.value,"aspect-ratio":H.value,onConfirm:se,onCancel:t[9]||(t[9]=s=>C.value=!1)},null,8,["image-src","aspect-ratio"])):(l(),n("div",Ee,[e("header",Ge,[e("button",{onClick:t[10]||(t[10]=s=>p.value="menu"),class:"p-2 rounded-full hover:bg-gray-100 text-dark-text transition-colors"},[d(u(pe),{class:"w-6 h-6"})]),e("h1",Oe,o(a.viewTitle),1)]),e("div",Xe,[p.value==="history"?(l(!0),n(f,{key:0},b(a.mockHistory,s=>(l(),n("div",{key:s.id,class:"bg-white p-4 rounded-2xl shadow-sm flex items-center gap-4"},[e("img",{src:s.image,class:"w-16 h-16 rounded-xl object-cover"},null,8,Je),e("div",null,[e("h3",Ke,o(s.name),1),e("p",Qe,o(s.time),1)]),t[20]||(t[20]=e("div",{class:"ml-auto text-fresh-green-600 font-bold text-sm"},"完成",-1))]))),128)):x("",!0),p.value==="favorites"?(l(!0),n(f,{key:1},b(a.mockFavorites,s=>(l(),n("div",{key:s.id,class:"bg-white p-4 rounded-2xl shadow-sm flex items-center gap-4"},[e("img",{src:s.image,class:"w-16 h-16 rounded-xl object-cover"},null,8,We),e("div",null,[e("h3",Ye,o(s.name),1),e("p",Ze,"作者: "+o(s.author),1)]),d(u(P),{class:"ml-auto w-6 h-6 text-red-500 fill-current"})]))),128)):x("",!0),p.value==="posts"?(l(!0),n(f,{key:2},b(a.mockPosts,s=>(l(),n("div",{key:s.id,class:"bg-white p-4 rounded-2xl shadow-sm flex gap-4"},[e("img",{src:s.image,class:"w-20 h-20 rounded-xl object-cover"},null,8,et),e("div",tt,[e("p",st,o(s.content),1),e("div",ot,[e("span",null,o(s.time),1),e("span",lt,[d(u(P),{class:"w-3 h-3"}),L(" "+o(s.likes),1)])])])]))),128)):x("",!0)]),t[21]||(t[21]=e("div",{class:"text-center text-gray-400 text-sm mt-8"}," 没有更多内容了 ",-1))]))]))}};export{ct as default};
