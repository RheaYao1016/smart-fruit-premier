import{u as v,o,c as n,a as t,e as r,A as k,F as x,r as m,g,i as _,t as i}from"./index-VVcMOklA.js";import{u as C}from"./community-BSVL4FNw.js";import{u as w}from"./production-ObipV6Zr.js";import{f as S}from"./datetime-DA9gX19a.js";const $={class:"space-y-4"},j={class:"overflow-hidden rounded-3xl border border-amber-100 bg-white shadow"},A=["src"],B={class:"space-y-2 px-4 py-4"},H={class:"grid grid-cols-3 gap-2"},P={class:"grid grid-cols-1 gap-3"},U=["onClick"],q={class:"text-lg font-semibold text-stone-800"},D={class:"mt-1 text-sm text-stone-500"},E={class:"card p-4"},F={class:"mb-3 flex items-center justify-between"},N={key:0,class:"space-y-3"},V=["onClick"],z={class:"line-clamp-1 text-sm font-medium text-stone-800"},I={class:"mt-1 line-clamp-1 text-xs text-stone-500"},L={class:"mt-1 text-xs text-stone-400"},M={key:1,class:"text-sm text-stone-400"},Q={class:"card p-4"},R={class:"mb-3 flex items-center justify-between"},T={key:0,class:"space-y-2"},W={class:"text-sm font-medium"},G={class:"text-xs text-stone-500"},J={key:1,class:"text-sm text-stone-400"},tt={__name:"HomeView",setup(K){const c=g(),d=v(),h=C(),a=w(),f=[{title:"å¼€å§‹åˆ¶ä½œ",desc:"è¿›å…¥ 5 æ­¥åˆ¶ä½œå‘å¯¼",path:"/production"},{title:"è¥å…»ç§‘æ™®",desc:"æŸ¥çœ‹æ°´æœé…æ¯”ä¸æ¸©åº¦å»ºè®®",path:"/nutrition"},{title:"æœæ±ç¤¾åŒº",desc:"å‘å¸ƒå›¾æ–‡å¹¶äº’åŠ¨",path:"/community"}],p=_(()=>{var l;return h.queryPosts({userId:(l=d.currentUser)==null?void 0:l.id,role:d.role,page:1,pageSize:3,sort:"hot"}).items}),b=_(()=>{var l;return a.getHistoryByUser((l=d.currentUser)==null?void 0:l.id).slice(0,2)});function u(l){a.resetDraft(),a.setMode(l),c.push("/production")}return(l,s)=>(o(),n("div",$,[t("section",j,[t("img",{src:r(k).homeBanner,class:"h-44 w-full object-cover",alt:"banner"},null,8,A),t("div",B,[s[5]||(s[5]=t("h2",{class:"text-xl font-bold text-stone-800"},"æ™ºèƒ½æ°´æœå¤„ç†ä¸“å®¶",-1)),s[6]||(s[6]=t("p",{class:"text-sm text-stone-600"},"ä¸€é”®åˆ¶ä½œé²œæœæ±ã€æ°´æœç½å¤´å’Œæœåˆ‡ï¼Œæ‰‹æœº/PWA ç›´æ¥å¯ç”¨ã€‚",-1)),t("div",H,[t("button",{class:"rounded-xl bg-amber-500 px-3 py-2 text-xs font-semibold text-white",onClick:s[0]||(s[0]=e=>u("juice"))},"æœæ±"),t("button",{class:"rounded-xl bg-emerald-500 px-3 py-2 text-xs font-semibold text-white",onClick:s[1]||(s[1]=e=>u("canned"))},"ç½å¤´"),t("button",{class:"rounded-xl bg-cyan-500 px-3 py-2 text-xs font-semibold text-white",onClick:s[2]||(s[2]=e=>u("cut"))},"æœåˆ‡")])])]),t("section",P,[(o(),n(x,null,m(f,e=>t("button",{key:e.path,class:"card p-4 text-left active:scale-[0.99]",onClick:y=>r(c).push(e.path)},[t("p",q,i(e.title),1),t("p",D,i(e.desc),1)],8,U)),64))]),t("section",E,[t("div",F,[s[7]||(s[7]=t("h3",{class:"text-base font-semibold"},"ç¤¾åŒºçƒ­å¸–",-1)),t("button",{class:"text-xs text-amber-600",onClick:s[3]||(s[3]=e=>r(c).push("/community"))},"æŸ¥çœ‹å…¨éƒ¨")]),p.value.length?(o(),n("div",N,[(o(!0),n(x,null,m(p.value,e=>(o(),n("button",{key:e.id,class:"w-full rounded-xl border border-stone-200 p-3 text-left",onClick:y=>r(c).push(`/community/${e.id}`)},[t("p",z,i(e.title),1),t("p",I,i(e.content),1),t("p",L,"ğŸ‘ "+i(e.likeCount)+" Â· ğŸ’¬ "+i(e.commentCount),1)],8,V))),128))])):(o(),n("p",M,"æš‚æ— å†…å®¹"))]),t("section",Q,[t("div",R,[s[8]||(s[8]=t("h3",{class:"text-base font-semibold"},"æˆ‘çš„æœ€è¿‘åˆ¶ä½œ",-1)),t("button",{class:"text-xs text-amber-600",onClick:s[4]||(s[4]=e=>r(c).push("/my"))},"å»æˆ‘çš„")]),b.value.length?(o(),n("div",T,[(o(!0),n(x,null,m(b.value,e=>(o(),n("div",{key:e.id,class:"rounded-xl border border-stone-200 p-3"},[t("p",W,i(e.mode==="juice"?"æœæ±":e.mode==="canned"?"ç½å¤´":"æœåˆ‡")+" Â· "+i(e.fruitCount)+" ä¸ªæ°´æœ",1),t("p",G,i(r(S)(e.createdAt)),1)]))),128))])):(o(),n("p",J,"è¿˜æ²¡æœ‰åˆ¶ä½œè®°å½•ï¼Œå»å¼€å§‹åˆ¶ä½œå§ã€‚"))])]))}};export{tt as default};
