import{D as h,f as i,E as a,S as s,i as D,A as o}from"./index-D_8ZP-ZB.js";function f(){return{fruitCount:1,fruits:[{id:1,pitting:!1,peeling:!1,cutting:!0}],mode:"",bladeGuide:"",settings:{texture:"微渣口感",temperature:"常温",sweetnessType:"自定义",sweetnessValue:35,cannedTemperature:"常温",cannedSweetness:20}}}const A=h("production",()=>{const e=i(f()),r=i(a.get(s.productionHistory,[])),l=D(()=>e.value.mode==="juice"?"果汁":e.value.mode==="canned"?"罐头":e.value.mode==="cut"?"果切":"-");function d(){a.set(s.productionHistory,r.value)}function c(){e.value=f()}function g(t){const u=Math.min(6,Math.max(1,Number(t||1)));e.value.fruitCount=u,e.value.fruits=Array.from({length:u},(n,b)=>({id:b+1,pitting:!1,peeling:!1,cutting:!0}))}function p(t,u){e.value.fruits[t]&&(e.value.fruits[t]={...e.value.fruits[t],...u,cutting:!0})}function v(t){var u,n;e.value.mode=t,e.value.bladeGuide=((n=(u=o.bladeGuides)==null?void 0:u[t])==null?void 0:n.url)||o.bladeVideos[t]||""}function m(t){e.value.settings={...e.value.settings,...t}}function S(t){r.value.unshift({id:`h_${Date.now()}_${Math.random().toString(16).slice(2,6)}`,...t,createdAt:new Date().toISOString()}),d()}function y(t){return r.value.filter(u=>u.userId===t)}return{draft:e,history:r,modeLabel:l,resetDraft:c,setFruitCount:g,updateFruit:p,setMode:v,updateSettings:m,addHistoryRecord:S,getHistoryByUser:y}});export{A as u};
