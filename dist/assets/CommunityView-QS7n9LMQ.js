import{i as h,u as J,c,a as t,l as o,b as n,F as L,n as $,y as I,s as K,v as O,q as p,t as i,p as k,M as F,P as Q,m as g,z as Z,g as ee,e as te,x as se,j as r,f as d}from"./index-DxTQJ_MY.js";import{H as M,S as le,_ as oe}from"./ImageCropper-BdOhV9FC.js";import{A as V}from"./arrow-left-og81Y4hK.js";import{X as z}from"./x-DZX_Ph0D.js";import"./check-DKu3InlJ.js";/**
 * @license lucide-vue-next v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=h("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=h("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-vue-next v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=h("LanguagesIcon",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-vue-next v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=h("ScissorsIcon",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-vue-next v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=h("Share2Icon",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-vue-next v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=h("TypeIcon",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),ue={class:"min-h-screen bg-cream pb-24 md:pb-8"},me={class:"sticky top-0 z-40 bg-white/90 backdrop-blur-md px-4 py-4 border-b border-gray-100 mb-6"},ge={class:"flex items-center justify-between mb-4"},xe={class:"flex items-center gap-4"},fe={class:"flex items-center gap-3 overflow-x-auto scrollbar-hide pb-1"},pe=["onClick"],he={class:"max-w-6xl mx-auto px-4 pb-8"},ve={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},be=["onClick","onContextmenu"],ye=["src"],we={class:"p-5 flex flex-col flex-1"},ke={class:"flex items-center gap-3 mb-3"},Ce=["src"],_e={class:"text-xs font-bold text-gray-600"},je=["onClick"],Le={class:"text-sm text-gray-400 line-clamp-2 mb-4 flex-1"},$e={class:"flex items-center gap-4 text-xs text-gray-400 border-t border-gray-50 pt-4 mt-auto"},Ie={class:"flex items-center gap-1"},Me={class:"flex items-center gap-1"},ze={class:"bg-white w-full md:max-w-lg md:rounded-3xl rounded-t-[2rem] p-6 animate-in slide-in-from-bottom duration-300"},qe={class:"flex items-center justify-between mb-4"},Pe=["disabled"],Se={key:0,class:"relative w-full h-48 rounded-xl overflow-hidden mb-4 group"},De=["src"],Ae={class:"flex items-center gap-4 border-t border-gray-100 pt-4"},Fe={key:1,class:"fixed inset-0 z-50 bg-white flex flex-col md:flex-row animate-in slide-in-from-right duration-300"},Ve={class:"w-full md:w-1/2 bg-black flex items-center justify-center p-4 h-[40vh] md:h-full relative"},Ne=["src"],Te={class:"flex-1 flex flex-col bg-white h-[60vh] md:h-full"},Be={class:"hidden md:flex items-center justify-between p-4 border-b border-gray-100"},He={class:"flex items-center gap-3"},Ue=["src"],Xe={class:"font-bold text-dark-text"},Ee={class:"flex-1 overflow-y-auto p-4 space-y-6"},Re={class:"md:hidden flex items-center gap-3 mb-4"},Ye=["src"],We={class:"font-bold text-dark-text"},Ge={class:"text-xs text-gray-400"},Je={class:"text-gray-800 leading-relaxed"},Ke={class:"space-y-4"},Oe={class:"font-bold text-sm text-gray-400"},Qe={class:"text-sm font-bold text-gray-800"},Ze={class:"p-4 border-t border-gray-100 bg-white"},et={class:"flex items-center gap-6 mb-4"},tt={class:"text-sm font-bold mb-2"},rt={__name:"CommunityView",setup(st){const q=te(),N=["全部","果汁","罐头","果切"],y=r("全部"),C=r([{id:1,user:"水果达人小李",avatar:"https://images.unsplash.com/photo-1599566150163-29194dcaad36?w=100&h=100&fit=crop",image:"https://images.unsplash.com/photo-1622597467536-01a69f78eedb?w=800&q=80",content:"炎炎夏日，这款西瓜薄荷沙冰真是救星！清凉解暑，口感绝佳。",title:"夏日特饮：西瓜薄荷冰沙",tag:"果汁",tagColor:"bg-orange-500",likes:128,isLiked:!1,comments:23,time:"2小时前"},{id:2,user:"健康生活家",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop",image:"https://images.unsplash.com/photo-1610970881699-44a5587cabec?w=800&q=80",content:"早餐必备！牛油果和香蕉的完美搭配，营养丰富又饱腹。",title:"营养早餐：牛油果香蕉奶昔",tag:"果汁",tagColor:"bg-orange-500",likes:95,isLiked:!0,comments:18,time:"5小时前"},{id:3,user:"美食探索者",avatar:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=100&h=100&fit=crop",image:"https://images.unsplash.com/photo-1502741126161-b048400f085d?w=800&q=80",content:"自己做的黄桃罐头，无添加更健康，甜度刚刚好！",title:"自制黄桃罐头，童年的味道",tag:"罐头",tagColor:"bg-yellow-500",likes:156,isLiked:!1,comments:34,time:"1天前"},{id:4,user:"果切艺术家",avatar:"https://images.unsplash.com/photo-1527980965255-d3b416303d12?w=100&h=100&fit=crop",image:"https://images.unsplash.com/photo-1519996529931-e8ecd95213d2?w=800&q=80",content:"用不同颜色的水果摆出彩虹造型，孩子们超喜欢！",title:"彩虹果盘，颜值与美味并存",tag:"果切",tagColor:"bg-orange-400",likes:203,isLiked:!1,comments:45,time:"1天前"},{id:5,user:"养生小达人",avatar:"https://images.unsplash.com/photo-1580489944761-15a19d654956?w=100&h=100&fit=crop",image:"https://images.unsplash.com/photo-1546171753-97d7676e4602?w=800&q=80",content:"这款果汁特别适合女生，补气血效果很好。",title:"红枣枸杞苹果汁，养颜又补气",tag:"果汁",tagColor:"bg-orange-500",likes:87,isLiked:!1,comments:16,time:"2天前"},{id:6,user:"创意料理师",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop",image:"https://images.unsplash.com/photo-1628557044797-f21a177c37ec?w=800&q=80",content:"浓郁的芒果配上椰奶和西米，仿佛置身热带海岛。",title:"芒果椰奶西米露，热带风情",tag:"罐头",tagColor:"bg-yellow-500",likes:142,isLiked:!1,comments:28,time:"3天前"}]),T=se(()=>y.value==="全部"?C.value:C.value.filter(l=>l.tag===y.value)),a=r(null),v=r(!1),x=r(""),u=r(null),P=r(null),B=l=>{l.isLiked=!l.isLiked,l.likes+=l.isLiked?1:-1},H=()=>P.value.click(),U=l=>{const e=l.target.files[0];if(!e)return;const s=new FileReader;s.onload=m=>{u.value=m.target.result},s.readAsDataURL(e)},X=()=>{if(!x.value.trim()&&!u.value)return;const l={id:Date.now(),user:"我",avatar:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=100&h=100&fit=crop",image:u.value||"https://placehold.co/800x800?text=No+Image",content:x.value,likes:0,isLiked:!1,comments:0,time:"刚刚"};C.value.unshift(l),x.value="",u.value=null,v.value=!1},f=r(!1),_=r({x:0,y:0}),j=r(null),w=r(!1),S=r(""),D=r(1),A=J(),E=(l,e)=>{l.preventDefault(),j.value=e;const s=l.touches?l.touches[0].clientX:l.clientX,m=l.touches?l.touches[0].clientY:l.clientY,W=Math.min(s,window.innerWidth-160),G=Math.min(m,window.innerHeight-200);_.value={x:W,y:G},f.value=!0},b=l=>{if(f.value=!1,l==="save"){const e=document.createElement("a");e.href=j.value,e.download="smart-fruit-image.jpg",e.click()}else l==="edit"?(S.value=j.value,D.value=1,w.value=!0):alert("该功能 (移除物体/提取文字/翻译) 正在开发中 AI...")},R=l=>{const e=l.tag==="罐头"?"canned":l.tag==="果切"?"cut":"juice";A.setMode(e),A.setFruitCount(3),q.push({name:"production-scheme"})},Y=l=>{const e=document.createElement("a");e.href=l,e.download="edited-smart-fruit-image.jpg",e.click(),w.value=!1,alert("图片已编辑并下载！")};return(l,e)=>(d(),c("div",ue,[t("header",me,[t("div",ge,[t("div",xe,[t("button",{onClick:e[0]||(e[0]=s=>o(q).push("/")),class:"p-2 rounded-full hover:bg-gray-100 text-dark-text transition-colors md:hidden"},[n(o(V),{class:"w-6 h-6"})]),e[19]||(e[19]=t("div",{class:"flex flex-col"},[t("h1",{class:"text-2xl font-bold font-heading text-dark-text tracking-tight"},"果汁社区"),t("p",{class:"text-xs text-gray-400"},"分享你的创意配方，与其他用户交流心得")],-1))])]),t("div",fe,[(d(),c(L,null,$(N,s=>t("button",{key:s,onClick:m=>y.value=s,class:k(["px-6 py-2 rounded-full text-sm font-bold transition-all whitespace-nowrap",y.value===s?"bg-orange-400 text-white shadow-lg shadow-orange-400/30":"bg-white text-gray-500 hover:bg-gray-50 border border-gray-100"])},i(s),11,pe)),64))])]),t("div",he,[t("div",ve,[(d(!0),c(L,null,$(T.value,s=>(d(),c("div",{key:s.id,class:"bg-white rounded-3xl overflow-hidden shadow-[0_8px_30px_rgb(0,0,0,0.04)] hover:shadow-[0_8px_30px_rgb(0,0,0,0.08)] transition-all duration-300 group flex flex-col h-full border border-gray-50"},[t("div",{class:"relative aspect-[4/3] overflow-hidden cursor-pointer",onClick:m=>l.openDetail(s),onContextmenu:I(m=>E(m,s.image),["prevent"])},[t("img",{src:s.image,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700",loading:"lazy"},null,8,ye),t("div",{class:k(["absolute top-4 right-4 px-3 py-1 rounded-full text-xs font-bold text-white shadow-sm",s.tagColor])},i(s.tag),3),e[20]||(e[20]=t("div",{class:"absolute top-4 left-4 w-8 h-8 rounded-full bg-black/20 text-white flex items-center justify-center backdrop-blur-sm opacity-0 group-hover:opacity-100 transition-opacity"},[t("div",{class:"w-3 h-3 rounded-full border-2 border-white"})],-1))],40,be),t("div",we,[t("div",ke,[t("img",{src:s.avatar,class:"w-8 h-8 rounded-full object-cover"},null,8,Ce),t("span",_e,i(s.user),1)]),t("h3",{class:"font-bold text-lg text-dark-text mb-2 leading-tight cursor-pointer hover:text-orange-500 transition-colors",onClick:m=>l.openDetail(s)},i(s.title),9,je),t("p",Le,i(s.content),1),t("div",$e,[t("div",Ie,[n(o(M),{class:k(["w-4 h-4",{"fill-red-500 text-red-500":s.isLiked}])},null,8,["class"]),g(" "+i(s.likes),1)]),t("div",Me,[n(o(F),{class:"w-4 h-4"}),g(" "+i(s.comments),1)])])])]))),128))]),e[21]||(e[21]=t("div",{class:"text-center text-gray-300 text-sm mt-12 mb-8 flex items-center justify-center gap-2"},[t("div",{class:"w-12 h-[1px] bg-gray-200"}),t("span",null,"没有更多内容了"),t("div",{class:"w-12 h-[1px] bg-gray-200"})],-1))]),t("button",{onClick:e[1]||(e[1]=s=>v.value=!0),class:"fixed bottom-24 md:bottom-12 right-6 md:right-12 w-14 h-14 bg-fresh-green-500 rounded-full text-white shadow-lg shadow-fresh-green-500/40 flex items-center justify-center hover:scale-110 active:scale-95 transition-all z-40 group"},[...e[22]||(e[22]=[t("div",{class:"absolute inset-0 bg-white/20 rounded-full animate-ping opacity-0 group-hover:opacity-100"},null,-1),t("span",{class:"text-3xl font-light mb-1"},"+",-1)])]),v.value?(d(),c("div",{key:0,class:"fixed inset-0 z-50 flex items-end md:items-center justify-center bg-black/50 backdrop-blur-sm",onClick:e[5]||(e[5]=I(s=>v.value=!1,["self"]))},[t("div",ze,[t("div",qe,[t("button",{onClick:e[2]||(e[2]=s=>v.value=!1),class:"text-gray-400 hover:text-dark-text"},[n(o(z),{class:"w-6 h-6"})]),e[23]||(e[23]=t("span",{class:"font-bold text-lg"},"发布动态",-1)),t("button",{onClick:X,disabled:!x.value.trim()&&!u.value,class:"text-fresh-green-600 font-bold disabled:opacity-50"}," 发布 ",8,Pe)]),K(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>x.value=s),placeholder:"分享你的新鲜事...",class:"w-full h-32 bg-transparent text-lg resize-none outline-none placeholder:text-gray-400 mb-4"},null,512),[[O,x.value]]),u.value?(d(),c("div",Se,[t("img",{src:u.value,class:"w-full h-full object-cover"},null,8,De),t("button",{onClick:e[4]||(e[4]=s=>u.value=null),class:"absolute top-2 right-2 bg-black/50 p-1 rounded-full text-white"},[n(o(z),{class:"w-4 h-4"})])])):p("",!0),t("div",Ae,[t("button",{onClick:H,class:"flex items-center gap-2 text-fresh-green-600 font-bold bg-fresh-green-50 px-4 py-2 rounded-full"},[n(o(ae),{class:"w-5 h-5"}),e[24]||(e[24]=t("span",{class:"text-sm"},"添加图片",-1))]),t("input",{type:"file",ref_key:"fileInput",ref:P,class:"hidden",accept:"image/*",onChange:U},null,544)])])])):p("",!0),a.value?(d(),c("div",Fe,[t("button",{onClick:e[6]||(e[6]=s=>a.value=null),class:"absolute top-4 left-4 z-10 md:hidden bg-black/50 p-2 rounded-full text-white"},[n(o(V),{class:"w-6 h-6"})]),t("div",Ve,[t("img",{src:a.value.image,class:"max-w-full max-h-full object-contain"},null,8,Ne)]),t("div",Te,[t("div",Be,[t("div",He,[t("img",{src:a.value.avatar,class:"w-10 h-10 rounded-full object-cover"},null,8,Ue),t("h3",Xe,i(a.value.user),1)]),t("button",{onClick:e[7]||(e[7]=s=>a.value=null)},[n(o(z),{class:"w-6 h-6 text-gray-400"})])]),t("div",Ee,[t("div",null,[t("div",Re,[t("img",{src:a.value.avatar,class:"w-10 h-10 rounded-full object-cover"},null,8,Ye),t("div",null,[t("h3",We,i(a.value.user),1),t("p",Ge,i(a.value.time),1)])]),t("p",Je,i(a.value.content),1)]),e[27]||(e[27]=t("hr",{class:"border-gray-100"},null,-1)),t("div",Ke,[t("h4",Oe,"评论 ("+i(a.value.comments)+")",1),(d(),c(L,null,$(3,s=>t("div",{key:s,class:"flex gap-3"},[e[26]||(e[26]=t("div",{class:"w-8 h-8 rounded-full bg-gray-200 flex-shrink-0"},null,-1)),t("div",null,[t("p",Qe,"用户 "+i(s),1),e[25]||(e[25]=t("p",{class:"text-sm text-gray-600"},"看着真不错！我也想试试。",-1))]),n(o(M),{class:"w-4 h-4 text-gray-300 ml-auto"})])),64))])]),t("div",Ze,[t("div",et,[n(o(M),{class:k(["w-7 h-7",a.value.isLiked?"text-red-500 fill-current":"text-dark-text"]),onClick:e[8]||(e[8]=s=>B(a.value))},null,8,["class"]),n(o(F),{class:"w-7 h-7 text-dark-text"}),n(o(de),{class:"w-7 h-7 text-dark-text ml-auto"})]),t("div",tt,i(a.value.likes)+" 次赞",1),e[29]||(e[29]=t("div",{class:"flex gap-3 mb-4"},[t("input",{type:"text",placeholder:"添加评论...",class:"flex-1 text-sm outline-none"}),t("button",{class:"text-fresh-green-600 font-bold text-sm"},"发布")],-1)),t("button",{onClick:e[9]||(e[9]=s=>R(a.value)),class:"w-full bg-fresh-green-500 text-white font-bold py-3 rounded-2xl flex items-center justify-center gap-2 shadow-lg shadow-fresh-green-500/20 active:scale-95 transition-transform"},[n(o(Q),{class:"w-5 h-5 fill-current"}),e[28]||(e[28]=g(" 开始制作同款 ",-1))])])])])):p("",!0),f.value?(d(),c("div",{key:2,class:"fixed z-[60] bg-gray-900/90 backdrop-blur-md rounded-2xl p-2 shadow-2xl text-white min-w-[160px] animate-in fade-in zoom-in-95 duration-200 origin-top-left",style:Z({top:_.value.y+"px",left:_.value.x+"px"}),onClick:e[15]||(e[15]=I(()=>{},["stop"]))},[t("button",{onClick:e[10]||(e[10]=s=>b("save")),class:"flex items-center gap-3 w-full p-3 hover:bg-white/10 rounded-xl transition-colors text-sm text-left"},[n(o(ne),{class:"w-4 h-4"}),e[30]||(e[30]=g(" 保存图片 ",-1))]),e[35]||(e[35]=t("div",{class:"h-[1px] bg-white/10 my-1 mx-2"},null,-1)),t("button",{onClick:e[11]||(e[11]=s=>b("edit")),class:"flex items-center gap-3 w-full p-3 hover:bg-white/10 rounded-xl transition-colors text-sm text-left"},[n(o(le),{class:"w-4 h-4"}),e[31]||(e[31]=g(" 编辑图片 ",-1))]),t("button",{onClick:e[12]||(e[12]=s=>b("remove")),class:"flex items-center gap-3 w-full p-3 hover:bg-white/10 rounded-xl transition-colors text-sm text-left"},[n(o(re),{class:"w-4 h-4"}),e[32]||(e[32]=g(" 移除物体 ",-1))]),t("button",{onClick:e[13]||(e[13]=s=>b("text")),class:"flex items-center gap-3 w-full p-3 hover:bg-white/10 rounded-xl transition-colors text-sm text-left"},[n(o(ce),{class:"w-4 h-4"}),e[33]||(e[33]=g(" 提取文字 ",-1))]),t("button",{onClick:e[14]||(e[14]=s=>b("trans")),class:"flex items-center gap-3 w-full p-3 hover:bg-white/10 rounded-xl transition-colors text-sm text-left"},[n(o(ie),{class:"w-4 h-4"}),e[34]||(e[34]=g(" 图片翻译 ",-1))])],4)):p("",!0),f.value?(d(),c("div",{key:3,class:"fixed inset-0 z-[55] bg-transparent",onClick:e[16]||(e[16]=s=>f.value=!1),onTouchstart:e[17]||(e[17]=s=>f.value=!1)},null,32)):p("",!0),w.value?(d(),ee(oe,{key:4,"image-src":S.value,"aspect-ratio":D.value,onConfirm:Y,onCancel:e[18]||(e[18]=s=>w.value=!1)},null,8,["image-src","aspect-ratio"])):p("",!0)]))}};export{rt as default};
