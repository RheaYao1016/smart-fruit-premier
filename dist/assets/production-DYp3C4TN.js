import{D as h,f as i,E as a,S as s,i as b,A as D}from"./index-CRnHf-Cy.js";function o(){return{fruitCount:1,fruits:[{id:1,pitting:!1,peeling:!1,cutting:!0}],mode:"",bladeGuide:"",settings:{texture:"微渣口感",temperature:"常温",sweetnessType:"自定义",sweetnessValue:35,cannedTemperature:"常温",cannedSweetness:20}}}const A=h("production",()=>{const t=i(o()),r=i(a.get(s.productionHistory,[])),f=b(()=>t.value.mode==="juice"?"果汁":t.value.mode==="canned"?"罐头":t.value.mode==="cut"?"果切":"-");function l(){a.set(s.productionHistory,r.value)}function d(){t.value=o()}function c(e){const u=Math.min(6,Math.max(1,Number(e||1)));t.value.fruitCount=u,t.value.fruits=Array.from({length:u},(n,y)=>({id:y+1,pitting:!1,peeling:!1,cutting:!0}))}function g(e,u){t.value.fruits[e]&&(t.value.fruits[e]={...t.value.fruits[e],...u,cutting:!0})}function p(e){var u,n;t.value.mode=e,t.value.bladeGuide=((n=(u=D.bladeGuides)==null?void 0:u[e])==null?void 0:n.url)||""}function v(e){t.value.settings={...t.value.settings,...e}}function m(e){r.value.unshift({id:`h_${Date.now()}_${Math.random().toString(16).slice(2,6)}`,...e,createdAt:new Date().toISOString()}),l()}function S(e){return r.value.filter(u=>u.userId===e)}return{draft:t,history:r,modeLabel:f,resetDraft:d,setFruitCount:c,updateFruit:g,setMode:p,updateSettings:v,addHistoryRecord:m,getHistoryByUser:S}});export{A as u};
